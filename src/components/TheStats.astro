---
const {
  stat1,
  stat2,
  stat3,
  stat4,
  stat5,
  val1,
  val2,
  val3,
  val4,
  val5,
  statsarray,
} = Astro.props;

// write a script that loops through the stats array and converts the values to percentages of 12
// then rounds them to the nearest whole number

// array to store numerator of fraction
const fractionArray = [];

const numKeys = Object.keys(statsarray).length;
for (let i = 0; i < numKeys; i++) {
  const percentage = Object.keys(statsarray)[i];
  console.log(percentage);
  const numerator = Math.round(Number(percentage) * 12);
  fractionArray.push(numerator);
}

console.log(fractionArray);
---

<div
  class="bg-black flex flex-col flex-1 m-5 p-5 rounded-xl justify-between text-xl text-biz1"
>
  <h1 class="text-2xl">The Stats</h1>

  <div id="progress-bars-container" class="p-4"></div>

  <script>
    // Define the statsarray
    // Get the container element
    var container = document.getElementById("progress-bars-container");

    // Loop through the statsarray
    for (var key in statsarray) {
      if (statsarray.hasOwnProperty(key)) {
        // Create progress bar element
        var progress = document.createElement("div");
        progress.className = "mb-4";

        // Create progress label
        var progressLabel = document.createElement("div");
        progressLabel.className = "mb-1 font-bold";
        progressLabel.textContent = key;

        // Create progress bar
        var progressBar = document.createElement("div");
        progressBar.className = "bg-green-500 h-3 rounded";
        progressBar.style.width = statsarray[key] * 10 + "%";

        // Append progress bar and label to the progress element
        progress.appendChild(progressLabel);
        progress.appendChild(progressBar);

        // Append progress element to the container
        container.appendChild(progress);
      }
    }
  </script>













<!-- <div class="flex flex-col justify-center">
  <template #default>
    {#each Object.entries(statsarray) as [key, value]}
      <h2>{key}:</h2>
      <div class="mt-2 bg-gray-600 rounded-full">
        <div class={`w-${fractionArray[key]}/12 mt-2 bg-purple-700 py-1 text-center rounded-full`}>
          <div class="text-white text-sm inline-block px-2 rounded-full">
            {Math.round(statsarray[key] * 100)}%
          </div>
        </div>
      </div>
    {/each}
  </template>
</div> -->




    




<!-- 
    <div class="flex flex-col justify-center">
      <h2>{fractionArray[key]}:</h2>
      <div class="mt-2 bg-gray-600 rounded-full">
        <div
        class=`w-${fractionArray[key]}/12 mt-2 bg-purple-700 py-1 text-center rounded-full`
        >
        <div class="text-white text-sm inline-block px-2 rounded-full">
          {fractionArray[value]}
          </div>
          </div>
          </div>
          </div>
        </div> -->
